{% extends 'base.html.twig' %}

{% block title %}Wine Categories - CORK{% endblock %}

{% block body %}
<div class="min-h-screen bg-gradient-to-b from-[#FFF8F0] to-[#F8EAD8] py-14 px-6">
    <div class="max-w-6xl mx-auto">
        <!-- Header Section -->
        <div class="flex flex-col sm:flex-row justify-between items-center mb-10">
            <div class="text-center sm:text-left mb-4 sm:mb-0">
                <h1 class="text-4xl font-extrabold text-[#5E0B15] tracking-tight mb-2">Wine Categories</h1>
                <p class="text-gray-600 text-sm italic">Curate and organize the finest selections of wine.</p>
            </div>
            <a href="{{ path('app_category_new') }}"
               class="px-6 py-2 rounded-xl font-semibold shadow-md transition-all duration-300 border text-sm sm:text-base"
               style="background-color: #7F1734; color: #F8EAD8; border-color: #EFCFB4;"
               onmouseover="this.style.backgroundColor='#9E2B47'"
               onmouseout="this.style.backgroundColor='#7F1734'">
               + Add New Category
            </a>
        </div>

        <!-- Categories Grid -->
        {% if categories|length > 0 %}
            <div class="grid sm:grid-cols-2 lg:grid-cols-3 gap-8">
                {% for category in categories %}
                    <div class="bg-white/90 backdrop-blur-sm border border-[#EFCFB4]/50 rounded-2xl shadow-md hover:shadow-xl transition p-6 relative">
                        <div class="absolute top-3 right-3 text-xs text-gray-400">
                            #{{ category.id }}
                        </div>

                        <h2 class="text-2xl font-bold mb-3 text-[#5E0B15]">
                            {{ category.name }}
                        </h2>

                        <p class="text-sm text-gray-700 mb-4 leading-relaxed">
                            {{ category.description ? category.description|slice(0, 120) ~ (category.description|length > 120 ? '‚Ä¶' : '') : 'No description available.' }}
                        </p>

                        <div class="text-xs text-gray-500 mb-4">
                            Created: {{ category.createdAt ? category.createdAt|date('M j, Y') : 'N/A' }}
                        </div>

                        <div class="flex justify-between items-center">
                            <a href="{{ path('app_category_edit', {'id': category.id}) }}"
                               class="text-sm font-semibold px-4 py-1.5 rounded-lg border transition-all duration-300"
                               style="background-color: #EFCFB4; color: #7F1734; border-color: #EFCFB4;"
                               onmouseover="this.style.backgroundColor='#E3B78E'"
                               onmouseout="this.style.backgroundColor='#EFCFB4'">
                               ‚úèÔ∏è Edit
                            </a>

                            <form method="post" action="{{ path('app_category_delete', {'id': category.id}) }}" onsubmit="return confirm('Are you sure you want to delete this category?');">
                                <input type="hidden" name="_token" value="{{ csrf_token('delete' ~ category.id) }}">
                                <button type="submit"
                                        class="text-sm font-semibold px-4 py-1.5 rounded-lg border transition-all duration-300"
                                        style="background-color: #B6465F; color: #F8EAD8; border-color: #EFCFB4;"
                                        onmouseover="this.style.backgroundColor='#9E2B47'"
                                        onmouseout="this.style.backgroundColor='#B6465F'">
                                    üóë Delete
                                </button>
                            </form>
                        </div>
                    </div>
                {% endfor %}
            </div>
        {% else %}
            <div class="text-center py-24">
                <p class="text-gray-600 text-lg">üçá No categories yet.</p>
                <p class="text-gray-500 text-sm mt-2">Create one to start organizing your wine collection.</p>
            </div>
        {% endif %}
    </div>
</div>
{% endblock %}
