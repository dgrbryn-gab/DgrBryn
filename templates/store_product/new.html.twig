{% extends 'base.html.twig' %}

{% block title %}New Store Product | Wine Store{% endblock %}

{% block body %}
<div class="py-8 px-4 max-w-2xl mx-auto">
    <h1 class="text-2xl font-semibold text-gray-800 mb-6">Add New Product</h1>

    <div class="bg-white p-6 rounded-lg border border-gray-200">
        {{ form_start(form, {'attr': {'class': 'space-y-4'}}) }}
            {# üç∑ Category Dropdown (displayed first) #}
            {% if form.category is defined %}
                <div>
                    {{ form_label(form.category, 'Category', {'label_attr': {'class': 'block text-sm font-semibold text-gray-700 mb-1'}}) }}
                    {{ form_widget(form.category, {'attr': {
                        'class': 'w-full border border-gray-300 rounded-md px-3 py-2 text-gray-800 bg-white'
                    }}) }}
                    {{ form_errors(form.category, {'attr': {'class': 'text-red-500 text-sm mt-1'}}) }}
                </div>
            {% endif %}

            {# Render all other fields except category, isAvailable, and _token #}
            {% for field in form %}
                {% if field.vars.name not in ['_token', 'category', 'isAvailable'] %}
                    <div>
                        {{ form_label(field, null, {'label_attr': {'class': 'block text-sm font-semibold text-gray-700 mb-1'}}) }}
                        {{ form_widget(field, {'attr': {
                            'class': 'w-full border border-gray-300 rounded-md px-3 py-2 text-gray-800 bg-white'
                        }}) }}
                        {{ form_errors(field, {'attr': {'class': 'text-red-500 text-sm mt-1'}}) }}
                    </div>
                {% endif %}
            {% endfor %}

            {# Custom rendering for isAvailable checkbox #}
            {% if form.isAvailable is defined %}
                <div class="flex items-center">
                    {{ form_widget(form.isAvailable, {'attr': {
                        'class': 'h-4 w-4 text-rose-600 border-gray-300 rounded focus:ring-rose-400'
                    }}) }}
                    {{ form_label(form.isAvailable, 'Is Available', {'label_attr': {'class': 'ml-2 text-sm font-semibold text-gray-700'}}) }}
                    {{ form_errors(form.isAvailable, {'attr': {'class': 'text-red-500 text-sm mt-1'}}) }}
                </div>
            {% endif %}

            {# Render CSRF token (hidden) #}
            {{ form_widget(form._token) }}

            <div class="flex justify-end gap-3 mt-6">
                <button type="submit" 
                        class="px-4 py-2 font-semibold rounded-md text-white"
                        style="background-color: #7F1734; border: 1px solid #f4e7ce;"
                        onmouseover="this.style.backgroundColor='#5c1027';"
                        onmouseout="this.style.backgroundColor='#7F1734';">
                    {{ button_label|default('Save') }}
                </button>
                <a href="{{ path('app_store_product_index') }}" 
                   class="px-4 py-2 font-semibold rounded-md text-gray-800 border border-gray-300"
                   style="background-color: #f9d3b4;"
                   onmouseover="this.style.backgroundColor='#e9c09e';"
                   onmouseout="this.style.backgroundColor='#f9d3b4';">
                    Cancel
                </a>
            </div>
        {{ form_end(form) }}
    </div>
</div>
{% endblock %}