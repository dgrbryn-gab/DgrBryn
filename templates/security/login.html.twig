{% extends 'base.html.twig' %}

{% block title %}Admin Login - CORK{% endblock %}

{% block stylesheets %}
    {{ parent() }}
    <style>
        /* Burgundy and Beige Color Scheme */
        :root {
            --burgundy-dark: #5E0B15;
            --burgundy-main: #7F1734;
            --burgundy-light: #9E2B47;
            --beige-light: #FFFAF5;
            --beige-main: #F8EAD8;
            --beige-accent: #EFCFB4;
        }

        /* Login Card Styling */
        .login-card {
            background: linear-gradient(135deg, var(--beige-light) 0%, var(--beige-main) 100%);
            border: 2px solid var(--beige-accent);
            box-shadow: 0 20px 60px rgba(94, 11, 21, 0.25), 0 0 40px rgba(94, 11, 21, 0.15);
        }

        /* Input Focus States */
        .login-input:focus {
            border-color: var(--burgundy-main) !important;
            box-shadow: 0 0 0 4px rgba(127, 23, 52, 0.1) !important;
        }

        /* Button Gradient */
        .login-btn {
            background: linear-gradient(135deg, var(--burgundy-main) 0%, var(--burgundy-dark) 100%);
            transition: all 0.3s ease;
        }

        .login-btn:hover {
            box-shadow: 0 8px 25px rgba(127, 23, 52, 0.35);
            transform: translateY(-2px);
        }

        /* Text Colors */
        .text-burgundy-dark {
            color: var(--burgundy-dark);
        }

        .text-burgundy-light {
            color: var(--burgundy-light);
        }

        .text-beige-main {
            color: var(--beige-main);
        }

        .text-beige-accent {
            color: var(--beige-accent);
        }

        /* Background Classes */
        .bg-burgundy-gradient {
            background: linear-gradient(135deg, var(--burgundy-dark) 0%, var(--burgundy-main) 100%);
        }

        .bg-beige-gradient {
            background: linear-gradient(135deg, var(--beige-light) 0%, var(--beige-main) 100%);
        }

        /* Hide Main Navigation */
        header, nav.navbar, .site-header, footer, .site-footer {
            display: none !important;
        }
    </style>
{% endblock %}

{% block body %}
<div class="fixed inset-0 min-h-screen bg-gradient-to-br from-[#5E0B15] via-[#7B1E3A] to-[#3D0A0A] flex items-center justify-center p-4 z-50">
    <div class="w-full max-w-md">
        <!-- Login Card -->
        <div class="login-card rounded-2xl overflow-hidden relative">
            
            <!-- Decorative background element -->
            <div class="absolute -top-40 -right-40 w-80 h-80 rounded-full bg-[#7F1734]/10 pointer-events-none"></div>
            
            <!-- Header -->
            <div class="relative z-10 px-8 py-10 text-center bg-burgundy-gradient text-beige-main">
                <div class="text-5xl mb-3 inline-block">üç∑</div>
                <h2 class="text-2xl font-bold tracking-tight">Admin Login</h2>
                <p class="text-sm text-beige-accent mt-2 opacity-90">Fine Cellar Management System</p>
            </div>

            <!-- Body -->
            <div class="relative z-10 px-8 py-10">
                
                <!-- Error Alert -->
                {% if error %}
                    <div class="mb-6 p-4 bg-red-50 border-l-4 border-red-600 rounded-lg">
                        <p class="text-sm font-semibold text-red-800">Login Failed!</p>
                        <p class="text-sm text-red-700 mt-1">{{ error.messageKey|trans(error.messageData, 'security') }}</p>
                    </div>
                {% endif %}

                <!-- Success Alert -->
                {% if app.user %}
                    <div class="mb-6 p-4 bg-green-50 border-l-4 border-green-600 rounded-lg">
                        <p class="text-sm text-green-800">You are logged in as <strong>{{ app.user.userIdentifier }}</strong>.</p>
                        <a href="{{ path('app_logout') }}" class="text-sm font-semibold text-green-700 hover:text-green-900 mt-2 inline-block">Logout</a>
                    </div>
                {% endif %}

                <!-- Login Form -->
                <form method="post" class="space-y-5">
                    
                    <!-- CSRF Token -->
                    <input type="hidden" name="_csrf_token" value="{{ csrf_token('authenticate') }}">

                    <!-- Email Field -->
                    <div>
                        <label for="inputEmail" class="block text-xs font-semibold text-burgundy-dark mb-2 uppercase tracking-widest">
                            Email Address
                        </label>
                        <input 
                            type="email" 
                            id="inputEmail" 
                            name="email" 
                            value="{{ last_username }}" 
                            placeholder="admin@example.com"
                            required 
                            autofocus
                            class="login-input w-full px-4 py-3 border-2 border-[#EFCFB4] rounded-lg bg-white text-[#3B0A0A] placeholder-[#9E8B7E] focus:outline-none focus:bg-[#FFFAF5] transition-all duration-300">
                    </div>

                    <!-- Password Field -->
                    <div>
                        <label for="inputPassword" class="block text-xs font-semibold text-burgundy-dark mb-2 uppercase tracking-widest">
                            Password
                        </label>
                        <input 
                            type="password" 
                            id="inputPassword" 
                            name="password" 
                            placeholder="Enter your password"
                            required
                            class="login-input w-full px-4 py-3 border-2 border-[#EFCFB4] rounded-lg bg-white text-[#3B0A0A] placeholder-[#9E8B7E] focus:outline-none focus:bg-[#FFFAF5] transition-all duration-300">
                    </div>

                    <!-- Remember Me -->
                    <div class="flex items-center space-x-2 pt-2">
                        <input 
                            type="checkbox" 
                            id="rememberMe" 
                            name="_remember_me"
                            class="w-4 h-4 accent-[#7F1734] cursor-pointer">
                        <label for="rememberMe" class="text-sm font-medium text-burgundy-dark cursor-pointer">
                            Remember me on this device
                        </label>
                    </div>

                    <!-- Login Button -->
                    <button 
                        type="submit"
                        class="login-btn w-full py-3 px-4 mt-6 text-beige-main font-bold uppercase tracking-wide rounded-lg shadow-lg active:translate-y-0">
                        Sign In
                    </button>

                </form>
            </div>
        </div>
    </div>
</div>
{% endblock %}